import{g,s as b,d as w,j as x,k as y,e as B,a as h,r as L}from"./firestore-BpOEQaOI.js";import{d as U,g as k}from"./supabaseClient-Dz-n4Q9K.js";const F=document.getElementById("btnUserEvents"),q=document.getElementById("btnListFavorite"),S=document.getElementById("btnDeleteAccont"),V=document.getElementById("btnSaveEdited"),T=document.getElementById("btnCancelEdited"),C=document.getElementById("formEdit"),u=document.getElementById("myEvents"),I=a=>{let o=document.createElement("ul");return a.forEach(async e=>{const i=await g();console.log(e.userUID,i.uid);const t=document.createElement("li"),d=document.createElement("h2"),s=document.createElement("p"),r=document.createElement("p"),n=document.createElement("p"),v=document.createElement("p"),f=document.createElement("img"),p=document.createElement("button"),l=document.createElement("button"),E=document.createElement("button"),m=document.createElement("button");d.textContent=e.titulo,s.textContent=e.descricao,r.textContent=`Data: ${e.data}`,n.textContent=`Endereço: ${e.endereco}`,v.textContent=`Categoria: ${e.categoria}`,p.textContent="Deletar",l.textContent=e.emDestaque?"Remover dos Destaques":"Solicitar Destaque",m.textContent=i.favoritos&&i.favoritos.includes(e.id)?"Desfavoritar":"favoritar",E.textContent="Editar",f.src=e.imagemUrl,t.id=e.id,l.addEventListener("click",c=>{c.target.textContent=="Solicitar destaque"?(l.textContent="Remover dos destaques",y(t.id)):(l.textContent="Solicitar destaque",y(t.id))}),E.addEventListener("click",()=>{C.style.display="inline",V.addEventListener("click",async c=>{c.preventDefault();const D=await A(e.imageName);B(e.id,D)}),T.addEventListener("click",c=>{c.preventDefault(),C.style.display="none"})}),m.addEventListener("click",c=>{c.target.textContent==="favoritar"?(m.textContent="desfavoritar",h(t.id)):(m.textContent="favoritar",L(t.id))}),t.append(f,d,s,r,n,v),e.userUID===i.uid?t.append(p,E,l):t.append(m),o.appendChild(t)}),o},A=async a=>{const o=document.getElementById("tituloEdited").value,e=document.getElementById("descricaoEdited").value,i=document.getElementById("categoriaEdited").value,t=document.getElementById("dateEdited").value,d=document.getElementById("enderecoEdited").value,s=document.getElementById("fileInputEdited"),r=await H(s.files[0],a),n={};return o&&(n.titulo=o),e&&(n.descricao=e),i&&(n.categoria=i),t&&(n.data=t),d&&(n.endereco=d),r&&(n.imagemUrl=r,n.imageName=s.files[0].name),n},H=async(a,o)=>a?(console.log(a,o),await U(o),await k(a)):null;F.addEventListener("click",async()=>{const a=await g();u.innerHTML="",u.appendChild(await I(await b("userUID",a.uid)))});q.addEventListener("click",async()=>{const o=(await g()).favoritos,e=await Promise.all(o.map(async i=>await w(i)));u.innerHTML="",u.appendChild(await I(e))});S.addEventListener("click",()=>{if(window.confirm("Tem certeza que deseja excluir sua conta?")){x();return}alert("Conta NÃO cancelada")});
