import{g as E,s as I,e as x,f as B,r as L,i as C,j as h,k as U,m as k}from"./firestore-d4sQHgqS.js";import{d as D,g as q}from"./supabaseClient-Dz-n4Q9K.js";const F=document.getElementById("btnUserEvents"),S=document.getElementById("btnListFavorite"),T=document.getElementById("btnDeleteAccont"),V=document.getElementById("btnSaveEdited"),H=document.getElementById("btnCancelEdited"),w=document.getElementById("formEdit"),d=document.getElementById("myEvents"),f=n=>{let o=document.createElement("ul");return n.forEach(async e=>{const i=await E();console.log(e.userUID,i.uid);const t=document.createElement("li"),s=document.createElement("h2"),r=document.createElement("p"),l=document.createElement("p"),a=document.createElement("p"),p=document.createElement("p"),y=document.createElement("img"),g=document.createElement("button"),m=document.createElement("button"),v=document.createElement("button"),u=document.createElement("button");s.textContent=e.titulo,r.textContent=e.descricao,l.textContent=`Data: ${e.data}`,a.textContent=`Endereço: ${e.endereco}`,p.textContent=`Categoria: ${e.categoria}`,g.textContent="Deletar",m.textContent=e.emDestaque?"Remover dos Destaques":"Solicitar Destaque",u.textContent=i.favoritos&&i.favoritos.includes(e.id)?"Desfavoritar":"favoritar",v.textContent="Editar",y.src=e.imagemUrl,t.id=e.id,g.addEventListener("click",async()=>{window.confirm("Tem certeza que deseja deletar?")?(await L(t.id),await D(e.imageName),await N()):alert("Não removido")}),m.addEventListener("click",c=>{c.target.textContent=="Solicitar destaque"?(m.textContent="Remover dos destaques",C(t.id)):(m.textContent="Solicitar destaque",C(t.id))}),v.addEventListener("click",()=>{w.style.display="inline",V.addEventListener("click",async c=>{c.preventDefault();const b=await j(e.imageName);h(e.id,b)}),H.addEventListener("click",c=>{c.preventDefault(),w.style.display="none"})}),u.addEventListener("click",c=>{c.target.textContent==="favoritar"?(u.textContent="desfavoritar",U(t.id)):(u.textContent="favoritar",k(t.id))}),t.append(y,s,r,l,a,p),e.userUID===i.uid?t.append(g,v,m):t.append(u),o.appendChild(t)}),o},N=async()=>{const n=await E();d.innerHTML="",d.appendChild(f(await I("userUID",n.uid)))},j=async n=>{const o=document.getElementById("tituloEdited").value,e=document.getElementById("descricaoEdited").value,i=document.getElementById("categoriaEdited").value,t=document.getElementById("dateEdited").value,s=document.getElementById("enderecoEdited").value,r=document.getElementById("fileInputEdited"),l=await A(r.files[0],n),a={};return o&&(a.titulo=o),e&&(a.descricao=e),i&&(a.categoria=i),t&&(a.data=t),s&&(a.endereco=s),l&&(a.imagemUrl=l,a.imageName=r.files[0].name),a},A=async(n,o)=>n?(console.log(n,o),await D(o),await q(n)):null;F.addEventListener("click",async()=>{const n=await E();d.innerHTML="",d.appendChild(await f(await I("userUID",n.uid)))});S.addEventListener("click",async()=>{const o=(await E()).favoritos,e=await Promise.all(o.map(async i=>await x(i)));d.innerHTML="",d.appendChild(await f(e))});T.addEventListener("click",()=>{if(window.confirm("Tem certeza que deseja excluir sua conta?")){B();return}alert("Conta NÃO cancelada")});
