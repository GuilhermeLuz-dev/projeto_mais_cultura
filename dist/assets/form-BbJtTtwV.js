import{g as N,c as S,e as _,d as A}from"./firestore-BpOEQaOI.js";import{g as s,d as M}from"./supabaseClient-Dz-n4Q9K.js";import{s as P}from"./main-fGrksW3e.js";const x=document.getElementById("btnAdd"),r=document.getElementById("feedbackContainer"),l=document.getElementById("eventName"),i=document.getElementById("descricao"),m=document.getElementById("categoria"),u=document.getElementById("start_date"),g=document.getElementById("end_date"),v=document.getElementById("start_time"),E=document.getElementById("end_time"),I=document.getElementById("cep"),f=document.getElementById("cidade"),y=document.getElementById("bairro"),w=document.getElementById("logradouro"),p=document.getElementById("numero"),B=document.getElementById("complemento"),D=document.getElementById("nomeLocal"),h=document.getElementById("organizerName"),L=document.getElementById("organizerDesc"),c=(e,a)=>{r.innerHTML="",r.appendChild(P(e,a)),setTimeout(()=>{r.innerHTML=""},3e3)},b=async()=>{const a=new URLSearchParams(window.location.search).get("id"),t=await A(a);return t.id=a,t},F=async(e,a)=>e?(console.log(e,a),await M(a),await s(e)):null,H=()=>{const e={};return e.startDate=u.value,e.endDate=g.value,e.startTime=v.value,e.endTime=E.value,e},O=()=>{const e={};return e.cep=I.value,e.cidade=f.value,e.bairro=y.value,e.logradouro=w.value,e.numero=p.value,e.complemento=B.value,e.nomeLocal=D.value,e},R=()=>{const e={};return e.name=h.value,e.desc=L.value,e};x.addEventListener("click",async e=>{c("Adicionando evento...","info");const a=l.value,t=i.value,T=m.value,n=document.getElementById("imagem-upload"),z=n.files[0]?await s(n.files[0]):null,C=H(),U=O(),V=R(),k=await N(),o={titulo:a,descricao:t,categoria:T,data:C,endereco:U,organizer:V,userUID:k.uid,emDestaque:!1};if(n.files[0]&&(o.imageName=n.files[0].name,o.imagemUrl=z),e.target.textContent=="Publicar Evento"){await S(o)?(c("Evento adicionado com sucesso!","success"),setTimeout(()=>{window.location.href="perfil.html"},3e3)):c("Erro ao adicionar evento","alert");return}if(e.target.textContent=="Salvar Edição"){const d=await b();console.log(d),o.imageName&&await F(n.files[0],d.imageName),await _(d.id,o)?(c("Evento editado com sucesso!","success"),setTimeout(()=>{window.location.href="perfil.html"},3e3)):c("Erro ao editar evento","alert")}});document.addEventListener("DOMContentLoaded",async()=>{if(new URLSearchParams(window.location.search).get("id")){const t=await b();l.value=t.titulo,i.value=t.descricao,m.value=t.categoria,u.value=t.data.startDate,g.value=t.data.endDate,v.value=t.data.startTime,E.value=t.data.endTime,I.value=t.endereco.cep,f.value=t.endereco.cidade,y.value=t.endereco.bairro,w.value=t.endereco.logradouro,p.value=t.endereco.numero,B.value=t.endereco.complemento,D.value=t.endereco.nomeLocal,h.value=t.organizer.name,L.value=t.organizer.desc}});
