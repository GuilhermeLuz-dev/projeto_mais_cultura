import{g as b,s as k,d as D,l as N,k as C,r as T,a as F}from"./firestore-C0iZVGC-.js";import{s as U}from"./main-jZdBNm8R.js";import{f as L}from"./header-EDs2RbMQ.js";import{d as x}from"./supabaseClient-Dz-n4Q9K.js";const H=document.getElementById("nameContainer"),w=document.getElementById("eventsCardsContainer"),f=document.getElementById("feedbackContainer"),v=document.getElementById("btnUserEvents"),E=document.getElementById("btnFavorite"),i=async(e,t)=>{f.innerHTML="",f.appendChild(await U(e,t)),setTimeout(()=>{f.innerHTML=""},3e3)},u=async()=>{const e=await b();let t;e?(H.innerHTML=e.nome,v.classList.contains("btn-active")?(t=await M(e.uid),t.children.length==0&&(t.innerHTML="<h2>Você ainda não criou nenhum evento!</h2>")):(t=await q(e.uid),t.children.length==0&&(t.innerHTML="<h2>Você ainda não favoritou nenhum evento!</h2>")),w.innerHTML="",w.appendChild(t)):window.location.href="index.html"},I=e=>{const t=document.createElement("div");t.className="btns-events-container";const o=document.createElement("button");o.classList.add("btn","btn-primary"),o.textContent="Deletar",o.addEventListener("click",async()=>{window.confirm("Tem certeza que deseja deletar?")?(i("Aguarde um momento...","info"),await N(e.id),await x(e.imageName),await u(),i("Evento removido com sucesso!","success")):i("Evento não removido!","alert")});const n=document.createElement("button");n.classList.add("btn","btn-primary"),n.textContent=e.emDestaque?"Remover destaque":"Solicitar destaque",n.addEventListener("click",async s=>{if(i("Aguarde um momento...","info"),s.target.textContent=="Solicitar destaque"){n.textContent="Remover destaque";const c=await C(e.id);i(c,"success")}else{n.textContent="Solicitar destaque";const c=await C(e.id);i(c,"success")}});const a=document.createElement("button");return a.classList.add("btn","btn-primary"),a.textContent="Editar",a.addEventListener("click",()=>{window.location.href=`formEditEvent.html?id=${e.id}`}),t.append(a,n,o),t},M=async e=>{const t=await k("userUID",e),o=document.createElement("div");return o.className="event-cards",t.forEach(n=>{const a=document.createElement("div");a.className="event-one-card";const s=document.createElement("div");s.className="image-wrapper",s.addEventListener("click",()=>{window.location.href=`event.html?id=${n.id}`});const c=document.createElement("img");c.src=n.imagemUrl,c.alt=n.titulo,s.appendChild(c);const r=document.createElement("div");r.className="event-info";const m=document.createElement("h3");m.textContent=n.titulo;const d=document.createElement("span"),l=L(new Date(n.data.startDate));d.innerHTML+=`<strong>${l.day}${l.month}</strong> | ${n.endereco.nomeLocal}`,r.append(m,d),a.append(s,r,I(n)),o.appendChild(a)}),o},$=async(e,t,o)=>{if(!o){window.location.href="login.html";return}if(i("Aguarde um momento...","info"),t.src.includes("favorited"))t.src="images/icons/heart.png",await T(e)?i("Evento removido dos favoritos com sucesso.","success"):i("Erro ao remover evento dos favoritos.","alert");else{const n=await F(e);t.src="images/icons/favorited.png",n?i("Evento adicionado aos favoritos com sucesso.","success"):i("Erro ao adicionar evento aos favoritos.","alert")}u()},q=async()=>{const e=await b(),t=e.favoritos||[],o=[];for(const a of t){const s=await D(a);s&&o.push({...s,id:a})}const n=document.createElement("div");return n.className="event-cards",o.forEach(a=>{const s=document.createElement("div");s.className="event-one-card";const c=document.createElement("div");c.className="image-wrapper";const r=document.createElement("img");r.src=a.imagemUrl,r.alt=a.titulo,c.appendChild(r);const m=document.createElement("div");m.className="favorite-container";const d=document.createElement("img");d.src=e.favoritos.includes(a.id)?"./images/icons/favorited.png":"./images/icons/heart.png",d.className="favorite-icon",d.addEventListener("click",y=>{$(a.id,y.target,e)}),m.appendChild(d);const l=document.createElement("div");l.className="event-info";const g=document.createElement("h3");g.textContent=a.titulo;const h=document.createElement("span"),p=L(new Date(a.data.startDate));h.innerHTML+=`<strong>${p.day}${p.month}</strong> | ${a.endereco.nomeLocal}`,l.append(g,h),s.append(c,l,m),n.appendChild(s)}),n};E.addEventListener("click",async()=>{i("Aguarde um momento...","info"),v.classList.remove("btn-active"),E.classList.add("btn-active"),u()});v.addEventListener("click",async()=>{i("Aguarde um momento...","info"),v.classList.add("btn-active"),E.classList.remove("btn-active"),u()});document.addEventListener("DOMContentLoaded",async()=>{u()});
